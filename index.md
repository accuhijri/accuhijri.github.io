---
layout: default
---

<img align="center" src="figures/ahc_logo.png" width=220 height=200>

[Halaman berbahasa Indonesia](./another-page.html)

Accurate Hijri Calculator (AHC) is a software for calculating the position and visibility of the crescent moon at the sunset time after the conjunction (ijtima'/new moon phase) that marks the beginning of a new month in the Islamic lunar calendar (Hijri calendar). This tool is intended for helping moslem people in estimating the start of a new Hijri month, making a calendar for coming years, comparing among the criteria of Hijri calendar, as well as educating people about the current issues regarding the Hijri calendar. This software incorporates various current crescent visibility criteria adopted by moslem organizations around the world. AHC was firt developed in 2012 and was published at [link](https://fi.ub.ac.id/kemahasiswaan-alumni/keorganisasian/tim-astronomi-fisika/accurate-hijri-calculator-2-2/). While the first version of AHC was built with GUI support from Delphi, now it is transformed into fully python package and can be executed on terminal (linux and windows) without GUI display. One can run AHC on [Jupyter notebook](https://jupyter.org/) to get GUI experience as demonstrated in a **tutorial** [here](https://github.com/accuhijri/ahc/blob/main/examples/ahc_1444_syawal.ipynb). 

## Download results

| year | Muharram | Shafar   | Rabiul Awwal | Rabiuts Tsani | Jumadil Ula | Jumadil Akhir | Rajab | Syaban | Ramadhan | Syawal | Dzulqadah | Dzulhijjah |
|:-----|:---------|:---------|:---------|:---------|:---------|:---------|:---------|:---------|:---------|:---------|:----------|:---------|
| 1444 | [calc](https://github.com/accuhijri/ahc_data/blob/main/data/1444/ahc_1444_muharram.ipynb),[img](https://drive.google.com/drive/folders/1zYkVQMOa3NGiazVDSOWb85z52_n_eR95?usp=share_link) | [calc](https://github.com/accuhijri/ahc_data/blob/main/data/1444/ahc_1444_shafar.ipynb),[img](https://drive.google.com/drive/folders/16I6oscehhZPpw4V4lcOJxF104SkAOcJ4?usp=share_link) | [calc](https://github.com/accuhijri/ahc_data/blob/main/data/1444/ahc_1444_rabiul_awwal.ipynb),[img](https://drive.google.com/drive/folders/19i0dPdBqMLSQSrRyTtSNgJLnKY0QxGsZ?usp=share_link) | [calc](https://github.com/accuhijri/ahc_data/blob/main/data/1444/ahc_1444_rabiuts_tsani.ipynb),[img](https://drive.google.com/drive/folders/1U6EGoq0uhBzrKN7XuJdeE9a5fk0_UxR_?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1PE64o4rZLcGHUbV-zYpEwXU6AoRMHxd4?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1lqjBs2j6Jegxxb7iXdbFI1dgnlOgs8sH?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1uzQuJuh2XWdBiQMpRbeTkDsYtyxD8FYl?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1LQ9a_EqBWSRfcXqD70xCmOvgTMFby0f-?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1BxhzrKRUY9LC-M9X8bot029Y9LBlUAY9?usp=share_link) | [calc](https://github.com/accuhijri/ahc_data/blob/main/data/1444/ahc_1444_syawal.ipynb),[img](https://drive.google.com/drive/folders/1HJVd3tzOU1wYk0vMx5KKDu1g_-K0akGi?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1Yr_DVf5f3MPekS8awHBNTM-c4V2xwJde?usp=share_link)  | calc,[img](https://drive.google.com/drive/folders/15sPUuSIYRw3_wZZ9EeHEblyLDlbH0JPQ?usp=share_link) |
| 1445 | calc,[img](https://drive.google.com/drive/folders/1KwxPBD79-ucOLYsONEzDOSGFW9wcYg4n?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1X1cx5Maz18IefIcj7ppQgdZZBZC3dJxX?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1S9jamUTfLFEINK2vv1XRrUgiJLv0BsV2?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1l0taOKxoYTIQlb-Ts0W3mSqk7bQRix1s?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1_QhY13-3qaaVih7m_JyXNqiHjllraJc6?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1Y0eDvwk0Ijj1RIGwHdkFUatTwHEyApsP?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/18PXSM2pY0iX78jllS61prIZrTT2tWY73?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1YbEHFdj3tXchRm_TFkyK1ZecC5lt4kdy?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1giCQERl9YrmXAYyK04rsFUYghqAAcaBn?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1tWnsV4FxZwLM2N7vxdvrFi0Tg3tHOt1n?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1vJ4fZvexbqFNH9Our2R4rpLFb5CssuqH?usp=share_link)  | calc,[img](https://drive.google.com/drive/folders/1XOvbGcjH17e4K4bvOHGi4Z-BqHA8SXBp?usp=share_link) |
| 1446 | calc,[img](https://drive.google.com/drive/folders/1qe6xR2nug1vr_2B-5WAw-jPeARKDgiKZ?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1QdnfBXwE3V1WvCG7_HY1akOslaNNANsP?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1SO4uZeRSeyY-zaEga6Sud8CSPM5wYiB7?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1kJtwROuzBHTx6DHy1SnckgaOt-jCkFZq?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1k5FroXIdFLAoNRmQHigq6fFPf9Up0sse?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1HM-jYGALF1obJiLAJEfyTtU1oajPIVDp?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1GsOKssvGCY_zqM3og-7L47MZuXDOL2BD?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1xRpDdRU4C2f6Nx-VHfhKQl9nDpMT2lWZ?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1Tok9S7o2D61zZEsExZBTOMsMQyXjdF7V?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1KI6jMGy352zG2hedCKzksTmJ4XDYHvL6?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1MZY9EOiXljwjt8ElrTQanUlmVgPyxPRE?usp=share_link)  | calc,[img](https://drive.google.com/drive/folders/1_v_yWDoP0phN7Ci5bvdDzDkzZAJxu7KJ?usp=share_link) |
| 1447 | calc,[img](https://drive.google.com/drive/folders/1fP0fDUBz5WuUUVDpA6S4c6cy4yl_Y3P6?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1rmbHkqze8ZdQO17-_eDipVHKLZRn6gvC?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/12BPW7R3WX0LuzGDRMZuI40j-wUR4xewm?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1wsHhzdKB43-WzG84rbd_2TDYIQBlt2Oz?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1LE0pg7exJ3nLVK0ztUlYN86OsoZGJqck?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1kN-NckYxFd1cqtJNLNBfiulw-Ocv6kB9?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/14xe9Xalyr6ITUySCJllyK3cEfEvqUNDl?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1qDI0pTxTxfaXBHNc-YYSwCnFAhGgrSbu?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1njfM6M6_wDvlFpJ8VDBLUkQB4DunFP7S?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/1xRBTMPPkcD-EGjnKgz1ezR0BNDkU4T0g?usp=share_link) | calc,[img](https://drive.google.com/drive/folders/11yaWHoQ_3uEweFK_BRMvYGYfHtY1WvVg?usp=share_link)  | calc,[img](https://drive.google.com/drive/folders/1HQXCBKrQgNGQE66n9VB0ObsS0yx9HTcG?usp=share_link) |
| 1448 | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img  | calc,img |
| 1449 | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img  | calc,img |
| 1450 | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img  | calc,img |
| 1451 | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img  | calc,img |
| 1452 | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img  | calc,img |
| 1453 | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img  | calc,img |
| 1454 | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img | calc,img  | calc,img |

## Developer
This software is developed and maintained by [Abdurro'uf](https://aabdurrouf.github.io/), an Indonesian astronomer who is currently working as a researcher at the Department of Physics and Astronomy, The Johns Hopkins University and The Space Telescope Science Institute (STScI). Any feedback, inquiry, or bugs report can be sent via email to abdurroufastro@gmail.com or fabdurr1@jhu.edu. 
 
## Installation
To install AHC, first clone AHC package into your desired directory (in your local machine) and then enter `ahc` directory and install. You can do it using the following commands 

```
git clone https://github.com/accuhijri/ahc.git
cd ahc
python -m pip install .
```

To use AHC, you need to put `de421.bsp` file in wherever directory you are working. This file is included in the `ahc` package and can be copied to your working directory. An alternative way would be to download this file from NASA website using the following command

```
wget https://ssd.jpl.nasa.gov/ftp/eph/planets/bsp/de421.bsp
```

Last but not least, you need to install [geopandas](https://geopandas.org/en/stable/) if you intend to produce crescent visibility map with AHC. To install it, you can use the following command, assuming you have `conda` installed in your machine.

```
conda install -c conda-forge geopandas
```

## Some features

### 1. Calculate the data of hilal (i.e., crescent)
In this example, we will estimate the start of Syawal 1444 based on various criteria currently adopted by moslem organizations around the world. Basically, to estimate the start of a new month in the Hijri calendar, we need to know the positions (with respect to the horizon) of moon (i.e., crescent) at the time of sunset after the conjunction of the moon (i.e., new moon phase).

First, we initialize the `hilal` class. 
```ruby
from ahc.hilal import hilal

# input the hijri year and month. 
# since we want to get crescent (i.e., hilal) visibility maps later, so we set calculate_maps=True
# plus_1day input agrument indicates that we want to also calculate the visibility maps for 1 day after the conjunction (i.e., new moon phase)

hijri_year = 1444
hijri_month = 10        # syawal is 10th month in Hijri calendar
calculate_maps = True 
plus_1day = True
hl = hilal(hijri_year=hijri_year, hijri_month=hijri_month, calculate_maps=calculate_maps, plus_1day=plus_1day)
```

`calculate_hilal_data` function can be used to get hilal data at sunset time on the day of conjunction. It's also possible to calculate hilal data for other days after the conjunction by adjusting `delta_day` input parameter. List of available time-zone can be seen [here](https://github.com/accuhijri/ahc/blob/main/ahc/timezones.txt).

```ruby
# location and time-zone
latitude = 3.595196
longitude = 98.672223
elevation = 23.0
time_zone_str = 'Asia/Jakarta'
loc_name = 'INDONESIA Medan'
hl.calculate_hilal_data(latitude, longitude, elevation, time_zone_str, loc_name=loc_name, delta_day=0)
```
<img src="figures/hd1.png" width=700 height=500>

### 2. Get maps of moon positions 
This include maps of moon altitude, longitude (topocentric and geocentric), moon-sun altitude difference (arc of vision; ARCV), moon width, and moon age. Below is a command to get the map of moon altitude.

```ruby
hl.map_moon_altitude()
```
<img src="figures/moon_alt_Syawal_1444_2042023.png" width=900 height=450>

Get the altitude difference between the moon and sun (arc of vision; ARCV):

```ruby
hl.map_moon_sun_altitude_difference()
```
<img src="figures/moon_arcv_Syawal_1444_2042023.png" width=900 height=450>

Get moon topocentric elongation:

```ruby
hl.map_moon_elongation()
```
<img src="figures/moon_elong_Syawal_1444_2042023.png" width=900 height=450>

Get moon geocentric elongation:

```ruby
hl.map_moon_geocentric_elongation()
```
<img src="figures/moon_elong_geo_Syawal_1444_2042023.png" width=900 height=450>

Get moon angular width:

```ruby
hl.map_moon_width()
```
<img src="figures/moon_width_Syawal_1444_2042023.png" width=900 height=450>

Get moon age (from conjunction up to local sunset time) in UTC:

```ruby
hl.map_moon_age_utc_localsunset()
```
<img src="figures/moon_age_utc_Syawal_1444_2042023.png" width=900 height=450>

### 3. Get map of crescent vibility based on various criteria
There are 6 criteria currently available in AHC: MABIMS, Odeh, Wujudul Hilal, Turkey, Danjon, and Itjima Qobla Ghurub. The list of criteria can be access using function `list_hilal_visibility_criteria`. Not all of them are crescent visibility criteria. Wujudul Hilal and Ijtima Qobla Ghurub were not intended for predicting the vibility of hilal. The Wujudul Hilal is currently (as of 2023) used by Muhammadiyah organization in Indonesia to calculate their Hijri calendar.

#### 3.1. Crescent vibility map based on MABIMS criterion
This citeria is currently (since 2022) used by the goverments of Indonesia, Malaysia, Singapore, and Brunei Darussalam. Based on this criteria, hilal is observable if its altitude (i.e., height above the horizon) is greater than 3 degree and its geocentric elongation (i.e., angular distance between moon and sun as measured from hyphotetical position at the center of the earth) is greater than 6.4 degree. 
```ruby
hl.map_hilal_visibility('MABIMS')
```
<img src="figures/map_mabims_Syawal_1444_2042023.png" width=900 height=450>

#### 3.2. Crescent visibility map based on Odeh criterion
This criteria is proposed by Mohammad Odeh in his 2016 [paper](https://link.springer.com/article/10.1007/s10686-005-9002-5) published in the Journal of Experimantal Astronomy. This criteria is formulated based on 737 observations and parameterized by the crescent width (proportional to moon topocentric elongation) and arc of vision (ARCV; the altitude difference between moon and sun).  
```ruby 
hl.map_hilal_visibility('Odeh')
```
<img src="figures/map_odeh_Syawal_1444_2042023.png" width=900 height=450>

#### 3.3. Crescent visibility map based on Terkey criterion
This criteria is proposed by the International Hijri Calendar Union Congress in Istanbul in 2016 ([news](https://www.dailysabah.com/turkey/2016/05/31/islamic-scholars-agree-on-a-shared-lunar-calendar-for-muslim-world)) to be the criterion for the unified Hijri calendar. See the full description of the criterion [here](https://github.com/accuhijri/accuhijri.github.io/blob/main/figures/turkey_criterion.png). Basically, this is formed from a crescent visibility criterion with two additional requirements (conditions). The hilal visibility criterion stated that hilal is observable if its altitude is greater than 5 degree and its topocentric elongation (angular distance between moon and sun as seen from the surface of the earth) is greater than 8 degree. The two additional conditions are: (1) the observability of hilal (as formulated above) happens in a region where the local sunset precedes midnight (00:00) at GMT; (2) conjunction happen before Fajr time in New Zealand.       
```ruby
hl.map_hilal_visibility('Turkey')
```
<img src="figures/map_turkey_Syawal_1444_2042023.png" width=900 height=450>

#### 3.4. Crescent visibility map based on Danjon limit
Based on this criteria, only hilal that has an elongation (angular distance between moon and sun) greater than 7 degree would be possible to be observed.

```ruby
hl.map_hilal_visibility('Danjon')
```
<img src="figures/map_danjon_Syawal_1444_2042023.png" width=900 height=450>

#### 3.5. Cresecent map based on Wujudul Hilal criterion
Baseon on this criteria, a new month can be started if conjunction has happen and moonset happen after sunset.
```ruby
hl.map_hilal_visibility('Wujudul Hilal')

```
<img src="figures/map_wh_Syawal_1444_2042023.png" width=900 height=450>

#### 3.6. Map of Ijtima Qobla Ghurub
Based on this criteria, a new month can be started after maghrib when the conjunction occur before sunset.
```ruby
hl.map_hilal_visibility('Ijtima Qobla Ghurub')
```
<img src="figures/map_IQG_Syawal_1444_2042023.png" width=900 height=450>
